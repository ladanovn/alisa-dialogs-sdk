"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
async function applyMiddleware(middleware, ctx) {
    const newContext = await middleware(ctx);
    if (!newContext) {
        throw new Error('Your middleware function should always return Context');
    }
    return newContext;
}
exports.applyMiddleware = applyMiddleware;
async function applyMiddlewares(middlewares, ctx) {
    let newContext = ctx;
    for (const middleware of middlewares) {
        try {
            newContext = await applyMiddleware(middleware, newContext);
        }
        catch (error) {
            throw new Error(error);
        }
    }
    return newContext;
}
exports.applyMiddlewares = applyMiddlewares;
